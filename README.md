# Поздравлятор

## Настройка проекта

Из корневой папки запускаем докер:

docker-compose up -d

Переходим в папку мигратора:

cd .\Src\Hosts\SolarLabDR.Migrator\

В папке мигратора:

dotnet ef database update

При создании БД таблица persons для удобства наполняется данными, осталось только добавить картинки.

### API
Запускаем SolarLabDR.Api

### Клиент
Из папки:

Src\Client\solar-lab.client 

Запускаем клиент:

npm start


### Сервис рассылки сообщений 
находится в Src\Client\SolarLabDR.MailSender

Для работы сервиса необходимо заполнить appsettings.json

  "MailServiceSettings": {
    "EmailFrom": "",
    "ServerSMTP": "smtp.mail.ru",
    "Port": 587,
    "CredentialUserName": "",
    "CredentialPassword": ""
  },
  "HRsEmailList": [ "" ]

Сервис настраивался под mail.ru:

В своей почте создаем пароль для внешнего приложения для отправки по SMTP :

Настройки → Все настройки → Безопасность → Пароли для внешних приложений.

mail.ru говорит что нужен порт 465, но он не работает, а работает 587.

"CredentialUserName": своя почта ;

"CredentialPassword":  созданный пароль ;

В список "HRsEmailList": - почта куда приходит список всех др. на сегодня

Почта сотрудников берется из полученной сущности, если её нет, то сообщение не посылается.

## О приложении
Приложение поздравлятора разделено на слои. Внешний адаптер - API , к которому обращается фронт и сервис рассылки сообщений.

Использовал EF Core, FluentMapper.

Фронт - React + typescript (первый раз писал фронт и SPA, использовал все что плохо лежало в инете :) )

Для рассылки сообщений использовался воркер + FluentScheduler.

